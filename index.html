<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Obras e Funcion√°rios</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèóÔ∏è</text></svg>">
    <link rel="stylesheet" href="styles.css?v=4.0">
</head>
<body>
    <!-- Header com Logo e Toggle -->
    <div class="header">
        <div class="header-left">
            <button class="menu-toggle" onclick="toggleSidebar()" title="Menu">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
            <img src="assets/logo.png" alt="Logo" class="header-logo" onerror="this.style.display='none'">
            <h1>Controle de Obras</h1>
        </div>
        <div class="header-right">
            <span class="user-info" id="data-hoje"></span>
            <span class="user-info">üë§ Viviane</span>
        </div>
    </div>

    <!-- Sidebar Menu -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <div class="sidebar-item" onclick="showTab('dashboard')">
                <span class="icon">üè†</span>
                <span class="text">In√≠cio</span>
            </div>
            
            <div class="sidebar-item" onclick="showTab('lancamentos')">
                <span class="icon">üìã</span>
                <span class="text">Lan√ßamentos</span>
            </div>
            
            <div class="sidebar-item submenu-parent" onclick="toggleSubmenu(this)">
                <span class="icon">üìÅ</span>
                <span class="text">Cadastros</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="submenu">
                <div class="submenu-item" onclick="showTab('funcionarios')">
                    <span class="icon">üë•</span>
                    <span class="text">Funcion√°rios</span>
                </div>
                <div class="submenu-item" onclick="showTab('obras')">
                    <span class="icon">üè¢</span>
                    <span class="text">Obras</span>
                </div>
                <div class="submenu-item" onclick="showTab('empresas')">
                    <span class="icon">üèõÔ∏è</span>
                    <span class="text">Empresas</span>
                </div>
                <div class="submenu-item" onclick="showTab('avaliacoes')">
                    <span class="icon">‚≠ê</span>
                    <span class="text">Avalia√ß√µes</span>
                </div>
                <div class="submenu-item" onclick="showTab('projetos')">
                    <span class="icon">üöß</span>
                    <span class="text">Projetos</span>
                </div>
                <div class="submenu-item" onclick="showTab('usuarios')">
                    <span class="icon">ÔøΩ</span>
                    <span class="text">Usu√°rios</span>
                </div>
            </div>
            
            <div class="sidebar-item" onclick="showTab('base')">
                <span class="icon">ÔøΩ</span>
                <span class="text">BASE</span>
            </div>
            
            <div class="sidebar-item" onclick="showTab('relatorios')">
                <span class="icon">üìä</span>
                <span class="text">Relat√≥rios</span>
            </div>
            
            <div class="sidebar-item" onclick="showTab('configuracoes')">
                <span class="icon">‚öôÔ∏è</span>
                <span class="text">Configura√ß√µes</span>
            </div>
            
            <div class="sidebar-item" onclick="showTab('backup')">
                <span class="icon">üíæ</span>
                <span class="text">Backup</span>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <div class="container-fluid">
        <!-- Aba Dashboard -->
        <div id="dashboard" class="tab-content active">
            <div class="welcome-section">
                <h1 class="welcome-title">üåü Bem-vinda, Viviane!</h1>
                <p class="welcome-subtitle">Painel de Controle - Sistema de Obras e Funcion√°rios</p>
                <div class="current-time" id="current-time"></div>
            </div>

            <div class="quick-stats">
                <div class="quick-stat-item">
                    <div class="quick-stat-number" id="dash-funcionarios">0</div>
                    <div class="quick-stat-label">Funcion√°rios Ativos</div>
                </div>
                <div class="quick-stat-item">
                    <div class="quick-stat-number" id="dash-obras">0</div>
                    <div class="quick-stat-label">Obras em Andamento</div>
                </div>
                <div class="quick-stat-item">
                    <div class="quick-stat-number" id="dash-horas-hoje">0h</div>
                    <div class="quick-stat-label">Horas Hoje</div>
                </div>
                <div class="quick-stat-item">
                    <div class="quick-stat-number" id="dash-lancamentos-mes">0</div>
                    <div class="quick-stat-label">Lan√ßamentos este M√™s</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-card">
                    <h3 class="chart-title">üìä Top Funcion√°rios (Este M√™s)</h3>
                    <div id="chart-funcionarios" class="simple-chart">
                        <!-- Barras simples ser√£o geradas aqui -->
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3 class="chart-title">üè¢ Horas por Obra</h3>
                    <div id="chart-obras" class="simple-chart">
                        <!-- Barras simples ser√£o geradas aqui -->
                    </div>
                </div>
            </div>

            <div class="recent-activity">
                <h3 class="chart-title">üìã Atividade Recente</h3>
                <div id="recent-activities">
                    <div class="activity-item">
                        <div class="activity-time">Hoje, 14:30</div>
                        <div class="activity-text">Sistema iniciado com sucesso</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba Lan√ßamentos Di√°rios -->
        <div id="lancamentos" class="tab-content">
            <h2 class="section-title">Lan√ßamentos Di√°rios</h2>
            <div class="alert alert-info">
                <strong>üí° Dica:</strong> Digite 08:00 para oito horas; 04:00 para meio turno.
            </div>
            
            <form id="form-lancamento">
                <div class="form-row">
                    <div class="form-group">
                        <label for="lancamento-data">Data</label>
                        <input type="date" id="lancamento-data" required>
                    </div>
                    <div class="form-group">
                        <label for="lancamento-funcionario">Funcion√°rio</label>
                        <select id="lancamento-funcionario" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lancamento-funcao">Fun√ß√£o</label>
                        <input type="text" id="lancamento-funcao" readonly>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="lancamento-empresa">Empresa</label>
                        <input type="text" id="lancamento-empresa" readonly>
                    </div>
                    <div class="form-group">
                        <label for="lancamento-obra">Obra</label>
                        <select id="lancamento-obra" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group" id="campo-horas">
                        <label for="lancamento-horas">Horas (HH:MM)</label>
                        <input type="time" id="lancamento-horas" value="08:00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="lancamento-observacao">Observa√ß√£o</label>
                    <textarea id="lancamento-observacao" rows="2" placeholder="Observa√ß√µes opcionais..."></textarea>
                </div>
                
                <button type="submit" class="btn btn-success">‚ûï Adicionar Lan√ßamento</button>
            </form>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Funcion√°rio</th>
                            <th>Fun√ß√£o</th>
                            <th>Empresa</th>
                            <th>Obra</th>
                            <th>Horas</th>
                            <th>Observa√ß√£o</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-lancamentos"></tbody>
                </table>
            </div>

            <!-- Modal de Edi√ß√£o de Lan√ßamento -->
            <div id="modal-editar-lancamento" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>‚úèÔ∏è Editar Lan√ßamento</h2>
                        <button class="modal-close" onclick="fecharModalLancamento()">&times;</button>
                    </div>
                    <form id="form-editar-lancamento" onsubmit="salvarEdicaoLancamento(event)">
                        <input type="hidden" id="edit-lancamento-id">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-lancamento-data">Data</label>
                                <input type="date" id="edit-lancamento-data" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-lancamento-funcionario">Funcion√°rio</label>
                                <select id="edit-lancamento-funcionario" required>
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-lancamento-funcao">Fun√ß√£o</label>
                                <input type="text" id="edit-lancamento-funcao">
                            </div>
                            <div class="form-group">
                                <label for="edit-lancamento-empresa">Empresa</label>
                                <select id="edit-lancamento-empresa">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-lancamento-obra">Obra</label>
                                <select id="edit-lancamento-obra">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="edit-lancamento-horas">Horas</label>
                                <input type="time" id="edit-lancamento-horas" value="08:00">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-lancamento-observacao">Observa√ß√£o</label>
                                <input type="text" id="edit-lancamento-observacao">
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button type="submit" class="btn btn-primary">üíæ Salvar Altera√ß√µes</button>
                            <button type="button" class="btn btn-danger" onclick="fecharModalLancamento()">‚ùå Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Aba Funcion√°rios -->
        <div id="funcionarios" class="tab-content">
            <h2 class="section-title">Funcion√°rios</h2>
            
            <form id="form-funcionario">
                <div class="form-row">
                    <div class="form-group">
                        <label for="funcionario-nome">Nome do Funcion√°rio</label>
                        <input type="text" id="funcionario-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="funcionario-funcao">Fun√ß√£o</label>
                        <select id="funcionario-funcao" required>
                            <option value="">Selecione...</option>
                            <option value="SERVENTE">SERVENTE</option>
                            <option value="PEDREIRO 01">PEDREIRO 01</option>
                            <option value="PEDREIRO 02">PEDREIRO 02</option>
                            <option value="PEDREIRO 03">PEDREIRO 03</option>
                            <option value="PINTOR">PINTOR</option>
                            <option value="PINTOR CHEFE">PINTOR CHEFE</option>
                            <option value="ARMADOR">ARMADOR</option>
                            <option value="CARPINTEIRO">CARPINTEIRO</option>
                            <option value="MEIO-OFICIAL">MEIO-OFICIAL</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="funcionario-empresa">Empresa</label>
                        <select id="funcionario-empresa" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="funcionario-situacao">Situa√ß√£o</label>
                        <select id="funcionario-situacao" required>
                            <option value="">Selecione...</option>
                            <option value="Ativo">Ativo</option>
                            <option value="Inativo">Inativo</option>
                        </select>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-success">‚ûï Adicionar Funcion√°rio</button>
            </form>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Funcion√°rio</th>
                            <th>Fun√ß√£o</th>
                            <th>Empresa</th>
                            <th>Situa√ß√£o</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-funcionarios"></tbody>
                </table>
            </div>

            <!-- Modal de Edi√ß√£o de Funcion√°rio -->
            <div id="modal-editar-funcionario" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>‚úèÔ∏è Editar Funcion√°rio</h2>
                        <button class="modal-close" onclick="fecharModalFuncionario()">&times;</button>
                    </div>
                    <form id="form-editar-funcionario" onsubmit="salvarEdicaoFuncionario(event)">
                        <input type="hidden" id="edit-funcionario-id">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-funcionario-nome">Nome do Funcion√°rio</label>
                                <input type="text" id="edit-funcionario-nome" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-funcionario-funcao">Fun√ß√£o</label>
                                <select id="edit-funcionario-funcao" required>
                                    <option value="SERVENTE">SERVENTE</option>
                                    <option value="PEDREIRO 01">PEDREIRO 01</option>
                                    <option value="PEDREIRO 02">PEDREIRO 02</option>
                                    <option value="PEDREIRO 03">PEDREIRO 03</option>
                                    <option value="PINTOR">PINTOR</option>
                                    <option value="PINTOR CHEFE">PINTOR CHEFE</option>
                                    <option value="ARMADOR">ARMADOR</option>
                                    <option value="CARPINTEIRO">CARPINTEIRO</option>
                                    <option value="MEIO-OFICIAL">MEIO-OFICIAL</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-funcionario-empresa">Empresa</label>
                                <select id="edit-funcionario-empresa" required>
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="edit-funcionario-situacao">Situa√ß√£o</label>
                                <select id="edit-funcionario-situacao" required>
                                    <option value="">Selecione...</option>
                                    <option value="Ativo">Ativo</option>
                                    <option value="Inativo">Inativo</option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button type="submit" class="btn btn-primary">üíæ Salvar Altera√ß√µes</button>
                            <button type="button" class="btn btn-danger" onclick="fecharModalFuncionario()">‚ùå Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Aba Obras -->
        <div id="obras" class="tab-content">
            <h2 class="section-title">Obras</h2>
            
            <form id="form-obra">
                <div class="form-row">
                    <div class="form-group">
                        <label for="obra-nome">Nome da Obra</label>
                        <input type="text" id="obra-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="obra-responsavel">Respons√°vel</label>
                        <input type="text" id="obra-responsavel" required>
                    </div>
                    <div class="form-group">
                        <label for="obra-cidade">Cidade</label>
                        <input type="text" id="obra-cidade" required>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-success">‚ûï Adicionar Obra</button>
            </form>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Obra</th>
                            <th>Respons√°vel</th>
                            <th>Cidade</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-obras"></tbody>
                </table>
            </div>

            <!-- Modal de Edi√ß√£o de Obra -->
            <div id="modal-editar-obra" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>‚úèÔ∏è Editar Obra</h2>
                        <button class="modal-close" onclick="fecharModalObra()">&times;</button>
                    </div>
                    <form id="form-editar-obra" onsubmit="salvarEdicaoObra(event)">
                        <input type="hidden" id="edit-obra-id">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-obra-nome">Nome da Obra</label>
                                <input type="text" id="edit-obra-nome" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-obra-responsavel">Respons√°vel</label>
                                <input type="text" id="edit-obra-responsavel">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-obra-cidade">Cidade</label>
                            <input type="text" id="edit-obra-cidade">
                        </div>
                        <div class="modal-actions">
                            <button type="submit" class="btn btn-primary">üíæ Salvar Altera√ß√µes</button>
                            <button type="button" class="btn btn-danger" onclick="fecharModalObra()">‚ùå Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Aba Empresas -->
        <div id="empresas" class="tab-content">
            <h2 class="section-title">Empresas</h2>
            
            <form id="form-empresa">
                <div class="form-row">
                    <div class="form-group">
                        <label for="empresa-nome">Nome da Empresa</label>
                        <input type="text" id="empresa-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="empresa-cnpj">CNPJ</label>
                        <input type="text" id="empresa-cnpj" required placeholder="00.000.000/0001-00">
                    </div>
                    <div class="form-group">
                        <label for="empresa-tipo">Tipo</label>
                        <select id="empresa-tipo" required>
                            <option value="">Selecione...</option>
                            <option value="Construtora">Construtora</option>
                            <option value="SPE">SPE</option>
                            <option value="Servi√ßos">Servi√ßos</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-success">‚ûï Adicionar Empresa</button>
            </form>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Nome da Empresa</th>
                            <th>CNPJ</th>
                            <th>Tipo</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-empresas"></tbody>
                </table>
            </div>

            <!-- Modal de Edi√ß√£o de Empresa -->
            <div id="modal-editar-empresa" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>‚úèÔ∏è Editar Empresa</h2>
                        <button class="modal-close" onclick="fecharModalEmpresa()">&times;</button>
                    </div>
                    <form id="form-editar-empresa" onsubmit="salvarEdicaoEmpresa(event)">
                        <input type="hidden" id="edit-empresa-id">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="edit-empresa-nome">Nome da Empresa</label>
                                <input type="text" id="edit-empresa-nome" required>
                            </div>
                            <div class="form-group">
                                <label for="edit-empresa-cnpj">CNPJ</label>
                                <input type="text" id="edit-empresa-cnpj">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-empresa-tipo">Tipo</label>
                            <select id="edit-empresa-tipo" required>
                                <option value="Construtora">Construtora</option>
                                <option value="Subempreiteira">Subempreiteira</option>
                                <option value="Fornecedor">Fornecedor</option>
                                <option value="Outro">Outro</option>
                            </select>
                        </div>
                        <div class="modal-actions">
                            <button type="submit" class="btn btn-primary">üíæ Salvar Altera√ß√µes</button>
                            <button type="button" class="btn btn-danger" onclick="fecharModalEmpresa()">‚ùå Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>



        <!-- Aba BASE -->
        <div id="base" class="tab-content">
            <h2 class="section-title">BASE - Consolida√ß√£o Autom√°tica</h2>
            <p class="alert alert-info">Esta aba consolida automaticamente os dados dos Lan√ßamentos Di√°rios.</p>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Origem</th>
                            <th>Data</th>
                            <th>Funcion√°rio</th>
                            <th>Fun√ß√£o</th>
                            <th>Empresa</th>
                            <th>Obra</th>
                            <th>Horas</th>
                            <th>M√™s</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-base"></tbody>
                </table>
            </div>
        </div>

        <!-- Aba Relat√≥rios -->
        <div id="relatorios" class="tab-content">
            <div class="rel-container">
                <!-- Header com t√≠tulo e a√ß√µes -->
                <div class="rel-header">
                    <div>
                        <h2 class="section-title" style="margin: 0;">üìä Relat√≥rio Inteligente</h2>
                        <p class="rel-subtitle">An√°lise visual de horas trabalhadas</p>
                    </div>
                    <div class="rel-actions">
                        <button class="btn btn-secondary" id="btn-exportar-relatorio">
                            <span>üì• Exportar</span>
                        </button>
                        <button class="btn btn-secondary" id="btn-imprimir-relatorio">
                            <span>üñ®Ô∏è Imprimir</span>
                        </button>
                    </div>
                </div>

                <!-- Cards de estat√≠sticas -->
                <div class="rel-stats-grid">
                    <div class="rel-stat-card">
                        <div class="rel-stat-icon">üë•</div>
                        <div class="rel-stat-content">
                            <div class="rel-stat-value" id="rel-total-funcionarios">0</div>
                            <div class="rel-stat-label">Funcion√°rios</div>
                        </div>
                    </div>
                    <div class="rel-stat-card">
                        <div class="rel-stat-icon">üè¢</div>
                        <div class="rel-stat-content">
                            <div class="rel-stat-value" id="rel-total-obras">0</div>
                            <div class="rel-stat-label">Obras</div>
                        </div>
                    </div>
                    <div class="rel-stat-card rel-stat-card-highlight">
                        <div class="rel-stat-icon">‚è±Ô∏è</div>
                        <div class="rel-stat-content">
                            <div class="rel-stat-value" id="rel-total-horas">0h</div>
                            <div class="rel-stat-label">Total de Horas</div>
                        </div>
                    </div>
                    <div class="rel-stat-card">
                        <div class="rel-stat-icon">üìã</div>
                        <div class="rel-stat-content">
                            <div class="rel-stat-value" id="rel-total-lancamentos">0</div>
                            <div class="rel-stat-label">Lan√ßamentos</div>
                        </div>
                    </div>
                </div>

                <!-- Seletor de per√≠odo -->
                <div class="rel-periodo-section">
                    <label class="rel-periodo-label">üìÖ Per√≠odo</label>
                    <div class="rel-periodo-presets">
                        <button class="rel-preset-btn active" data-preset="7dias">√öltimos 7 dias</button>
                        <button class="rel-preset-btn" data-preset="mes">Este m√™s</button>
                        <button class="rel-preset-btn" data-preset="custom">Personalizado</button>
                    </div>
                    <div class="rel-periodo-custom" id="rel-periodo-custom" style="display: none;">
                        <input type="date" id="rel-data-inicio" class="rel-date-input">
                        <span style="color: #666; margin: 0 0.5rem;">at√©</span>
                        <input type="date" id="rel-data-fim" class="rel-date-input">
                        <button class="btn btn-primary btn-sm" id="btn-aplicar-periodo">Aplicar</button>
                    </div>
                </div>

                <!-- Seletor de visualiza√ß√£o (tabs) -->
                <div class="rel-view-selector">
                    <button class="view-tab active" data-view="top-funcionarios">
                        <span class="view-tab-icon">üèÜ</span>
                        <span class="view-tab-label">Top Funcion√°rios</span>
                    </button>
                    <button class="view-tab" data-view="por-obra">
                        <span class="view-tab-icon">üè¢</span>
                        <span class="view-tab-label">Por Obra</span>
                    </button>
                    <button class="view-tab" data-view="por-dia">
                        <span class="view-tab-icon">üìÖ</span>
                        <span class="view-tab-label">Por Dia</span>
                    </button>
                </div>

                <!-- Se√ß√£o de filtros com chips -->
                <div class="rel-filters-section">
                    <div class="rel-filters-header">
                        <label>üîç Filtros</label>
                        <button class="btn-add-filter" id="btn-add-filter">+ Adicionar filtro</button>
                    </div>
                    <div class="rel-chips-container" id="rel-chips-container">
                        <!-- Chips din√¢micos ser√£o inseridos aqui -->
                    </div>
                </div>

                <!-- √Årea de visualiza√ß√£o -->
                <div class="rel-visualization-area" id="rel-visualization-area">
                    <!-- Conte√∫do din√¢mico das visualiza√ß√µes -->
                </div>
            </div>
        </div>

        <!-- Aba Avalia√ß√µes -->
        <div id="avaliacoes" class="tab-content">
            <div class="aval-container">
                <!-- Header com t√≠tulo e a√ß√µes -->
                <div class="aval-header">
                    <div>
                        <h2 class="section-title" style="margin: 0;">‚≠ê Avalia√ß√£o de Desempenho</h2>
                        <p class="aval-subtitle">Acompanhe e melhore a performance da sua equipe</p>
                    </div>
                    <div class="aval-actions">
                        <button class="btn btn-secondary" id="btn-exportar-avaliacoes">
                            <span>üì• Exportar</span>
                        </button>
                        <button class="btn btn-secondary" id="btn-imprimir-avaliacoes">
                            <span>üñ®Ô∏è Imprimir</span>
                        </button>
                    </div>
                </div>

                <!-- Cards de estat√≠sticas -->
                <div class="aval-stats-grid">
                    <div class="aval-stat-card">
                        <div class="aval-stat-icon">üë•</div>
                        <div class="aval-stat-content">
                            <div class="aval-stat-value" id="aval-total-funcionarios">0</div>
                            <div class="aval-stat-label">Total de Pessoas</div>
                        </div>
                    </div>
                    <div class="aval-stat-card">
                        <div class="aval-stat-icon">‚≠ê</div>
                        <div class="aval-stat-content">
                            <div class="aval-stat-value" id="aval-media-geral">0.0</div>
                            <div class="aval-stat-label">M√©dia Geral</div>
                        </div>
                    </div>
                    <div class="aval-stat-card aval-stat-card-success">
                        <div class="aval-stat-icon">üìà</div>
                        <div class="aval-stat-content">
                            <div class="aval-stat-value" id="aval-melhoria">+0.0</div>
                            <div class="aval-stat-label">Melhoria</div>
                        </div>
                    </div>
                    <div class="aval-stat-card aval-stat-card-warning">
                        <div class="aval-stat-icon">‚ö†Ô∏è</div>
                        <div class="aval-stat-content">
                            <div class="aval-stat-value" id="aval-atencao">0</div>
                            <div class="aval-stat-label">Precisam Aten√ß√£o</div>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o de sele√ß√£o de funcion√°rios -->
                <div class="aval-selecao-section">
                    <div class="aval-selecao-header">
                        <h3>‚úèÔ∏è Fazer Nova Avalia√ß√£o</h3>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="aval-select-funcionario" class="aval-search-input" style="flex: 1;">
                                <option value="">üë§ Selecione um funcion√°rio...</option>
                            </select>
                            <input type="text" id="aval-search-funcionario" placeholder="üîç Ou buscar por nome..." class="aval-search-input" style="flex: 1;">
                        </div>
                    </div>
                    
                    <div class="aval-funcionarios-grid" id="aval-funcionarios-grid">
                        <!-- Cards de funcion√°rios ser√£o inseridos aqui -->
                    </div>
                </div>

                <!-- Formul√°rio de avalia√ß√£o (inicialmente oculto) -->
                <div class="aval-form-section" id="aval-form-section" style="display: none;">
                    <!-- Conte√∫do do formul√°rio ser√° inserido aqui -->
                </div>

                <!-- Hist√≥rico de avalia√ß√µes -->
                <div class="aval-historico-section">
                    <h3 class="section-title">üìä Hist√≥rico de Avalia√ß√µes</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Funcion√°rio</th>
                                    <th>Data</th>
                                    <th>Per√≠odo</th>
                                    <th>M√©dia Geral</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tabela-avaliacoes"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Aba Projetos -->
        <div id="projetos" class="tab-content">
            <h2 class="section-title">üöß Gest√£o de Projetos</h2>
            
            <form id="form-projeto">
                <div class="form-row">
                    <div class="form-group">
                        <label for="projeto-nome">Nome do Projeto</label>
                        <input type="text" id="projeto-nome" required>
                    </div>
                    <div class="form-group">
                        <label for="projeto-cliente">Cliente</label>
                        <input type="text" id="projeto-cliente" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="projeto-inicio">Data de In√≠cio</label>
                        <input type="date" id="projeto-inicio" required>
                    </div>
                    <div class="form-group">
                        <label for="projeto-prazo">Prazo Final</label>
                        <input type="date" id="projeto-prazo" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="projeto-orcamento">Or√ßamento</label>
                        <input type="number" id="projeto-orcamento" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="projeto-status">Status</label>
                        <select id="projeto-status" required>
                            <option value="planejamento">Planejamento</option>
                            <option value="em-andamento">Em Andamento</option>
                            <option value="pausado">Pausado</option>
                            <option value="concluido">Conclu√≠do</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="projeto-descricao">Descri√ß√£o do Projeto</label>
                    <textarea id="projeto-descricao" rows="3" placeholder="Descreva o projeto, objetivos e escopo..."></textarea>
                </div>
                
                <button type="submit" class="btn btn-success">‚ûï Criar Projeto</button>
            </form>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Projeto</th>
                            <th>Cliente</th>
                            <th>In√≠cio</th>
                            <th>Prazo</th>
                            <th>Or√ßamento</th>
                            <th>Status</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-projetos"></tbody>
                </table>
            </div>
        </div>

        <!-- Aba Usu√°rios -->
        <div id="usuarios" class="tab-content">
            <h2 class="section-title">üë§ Gerenciamento de Usu√°rios</h2>
            
            <!-- Sistema de Login/Cadastro -->
            <div id="auth-section" class="auth-container">
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="showAuthTab('login')">üîë Login</button>
                    <button class="auth-tab" onclick="showAuthTab('cadastro')">üìù Cadastrar</button>
                </div>

                <!-- Formul√°rio de Login -->
                <div id="login-form" class="auth-form active">
                    <h3>Entrar no Sistema</h3>
                    <form onsubmit="fazerLogin(event)">
                        <div class="form-group">
                            <label for="login-email">E-mail</label>
                            <input type="email" id="login-email" required placeholder="seu@email.com">
                        </div>
                        <div class="form-group">
                            <label for="login-senha">Senha</label>
                            <input type="password" id="login-senha" required placeholder="Sua senha">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="login-lembrar"> Lembrar de mim
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary btn-full">üîë Entrar</button>
                    </form>
                    <p class="auth-link">N√£o tem conta? <a href="#" onclick="showAuthTab('cadastro')">Cadastre-se aqui</a></p>
                </div>

                <!-- Formul√°rio de Cadastro -->
                <div id="cadastro-form" class="auth-form">
                    <h3>Criar Nova Conta</h3>
                    <form onsubmit="fazerCadastro(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cadastro-nome">Nome Completo</label>
                                <input type="text" id="cadastro-nome" required placeholder="Seu nome completo">
                            </div>
                            <div class="form-group">
                                <label for="cadastro-empresa">Empresa</label>
                                <input type="text" id="cadastro-empresa" required placeholder="Nome da sua empresa">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="cadastro-email">E-mail</label>
                            <input type="email" id="cadastro-email" required placeholder="seu@email.com">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cadastro-senha">Senha</label>
                                <input type="password" id="cadastro-senha" required placeholder="M√≠nimo 6 caracteres">
                            </div>
                            <div class="form-group">
                                <label for="cadastro-confirma">Confirmar Senha</label>
                                <input type="password" id="cadastro-confirma" required placeholder="Confirme a senha">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="cadastro-cargo">Cargo/Fun√ß√£o</label>
                            <select id="cadastro-cargo" required>
                                <option value="">Selecione...</option>
                                <option value="administrador">Administrador</option>
                                <option value="gerente">Gerente de Obras</option>
                                <option value="encarregado">Encarregado</option>
                                <option value="supervisor">Supervisor</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="cadastro-termos" required> 
                                Aceito os <a href="#" onclick="mostrarTermos()">termos de uso</a>
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success btn-full">üìù Criar Conta</button>
                    </form>
                    <p class="auth-link">J√° tem conta? <a href="#" onclick="showAuthTab('login')">Fa√ßa login aqui</a></p>
                </div>
            </div>

            <!-- √Årea do Usu√°rio Logado -->
            <div id="user-area" class="user-area" style="display: none;">
                <div class="user-welcome">
                    <div class="user-avatar">üë§</div>
                    <div class="user-info">
                        <h3 id="user-nome">Nome do Usu√°rio</h3>
                        <p id="user-empresa">Empresa</p>
                        <p id="user-cargo">Cargo</p>
                        <small>√öltimo acesso: <span id="user-ultimo-acesso">Agora</span></small>
                    </div>
                    <button class="btn btn-danger" onclick="fazerLogout()">üö™ Sair</button>
                </div>

                <div class="config-grid">
                    <div class="config-section">
                        <h3>üë§ Editar Perfil</h3>
                        <form id="form-perfil">
                            <div class="form-group">
                                <label for="perfil-nome">Nome</label>
                                <input type="text" id="perfil-nome">
                            </div>
                            <div class="form-group">
                                <label for="perfil-empresa">Empresa</label>
                                <input type="text" id="perfil-empresa">
                            </div>
                            <div class="form-group">
                                <label for="perfil-cargo">Cargo</label>
                                <select id="perfil-cargo">
                                    <option value="administrador">Administrador</option>
                                    <option value="gerente">Gerente de Obras</option>
                                    <option value="encarregado">Encarregado</option>
                                    <option value="supervisor">Supervisor</option>
                                    <option value="outros">Outros</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="atualizarPerfil()">üíæ Salvar</button>
                        </form>
                    </div>

                    <div class="config-section">
                        <h3>üîí Alterar Senha</h3>
                        <form id="form-senha">
                            <div class="form-group">
                                <label for="senha-atual">Senha Atual</label>
                                <input type="password" id="senha-atual" required>
                            </div>
                            <div class="form-group">
                                <label for="senha-nova">Nova Senha</label>
                                <input type="password" id="senha-nova" required>
                            </div>
                            <div class="form-group">
                                <label for="senha-confirma">Confirmar Nova Senha</label>
                                <input type="password" id="senha-confirma" required>
                            </div>
                            <button type="button" class="btn btn-warning" onclick="alterarSenha()">üîí Alterar</button>
                        </form>
                    </div>

                    <div class="config-section">
                        <h3>üìä Estat√≠sticas do Usu√°rio</h3>
                        <div class="user-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="stat-dias-cadastro">0</span>
                                <span class="stat-label">Dias cadastrado</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="stat-total-lancamentos">0</span>
                                <span class="stat-label">Lan√ßamentos feitos</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="stat-avaliacoes-feitas">0</span>
                                <span class="stat-label">Avalia√ß√µes realizadas</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="stat-ultimo-backup">Nunca</span>
                                <span class="stat-label">√öltimo backup</span>
                            </div>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3>‚ö†Ô∏è Zona de Perigo</h3>
                        <p>A√ß√µes irrevers√≠veis que afetam sua conta.</p>
                        <div style="margin-top: 1rem;">
                            <button class="btn btn-danger" onclick="excluirConta()" style="margin-bottom: 0.5rem;">
                                üóëÔ∏è Excluir Conta
                            </button>
                            <br>
                            <small style="color: #666;">Esta a√ß√£o n√£o pode ser desfeita!</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba Configura√ß√µes -->
        <div id="configuracoes" class="tab-content">
            <h2 class="section-title">‚öôÔ∏è Configura√ß√µes do Sistema</h2>
            
            <div class="config-grid">
                <div class="config-section">
                    <h3>üë§ Perfil do Usu√°rio</h3>
                    <div class="form-group">
                        <label for="config-nome-usuario">Nome do Usu√°rio</label>
                        <input type="text" id="config-nome-usuario" value="Viviane">
                    </div>
                    <div class="form-group">
                        <label for="config-empresa-principal">Empresa Principal</label>
                        <select id="config-empresa-principal">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>

                <div class="config-section">
                    <h3>üé® Apar√™ncia</h3>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="config-modo-escuro">
                            Modo Escuro (em breve)
                        </label>
                    </div>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="config-animacoes" checked>
                            Anima√ß√µes e Transi√ß√µes
                        </label>
                    </div>
                </div>

                <div class="config-section">
                    <h3>üîî Notifica√ß√µes</h3>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="config-notif-lancamentos" checked>
                            Lembrar de fazer lan√ßamentos di√°rios
                        </label>
                    </div>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="config-notif-avaliacoes" checked>
                            Lembrar de avaliar funcion√°rios
                        </label>
                    </div>
                </div>

                <div class="config-section">
                    <h3>üíæ Dados e Backup</h3>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="config-backup-auto">
                            Backup autom√°tico semanal
                        </label>
                    </div>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="config-salvar-auto" checked>
                            Salvamento autom√°tico
                        </label>
                    </div>
                </div>
            </div>

            <div class="config-actions">
                <button class="btn btn-primary" onclick="salvarConfiguracoes()">üíæ Salvar Configura√ß√µes</button>
                <button class="btn btn-danger" onclick="resetarConfiguracoes()">üîÑ Restaurar Padr√£o</button>
            </div>
        </div>

        <!-- Aba Backup & Dados -->
        <div id="backup" class="tab-content">
            <h2 class="section-title">üíæ Backup & Gerenciamento de Dados</h2>
            
            <div class="backup-grid">
                <div class="backup-card">
                    <h3 class="backup-card-title">üì§ Exportar Dados</h3>
                    <p class="backup-card-description">Fa√ßa download de todos os seus dados em formato JSON</p>
                    <div class="backup-info">
                        <small>√öltimo backup: <span id="ultimo-backup">Nunca</span></small>
                    </div>
                    <button class="btn btn-primary" onclick="exportarDados()">
                        üì• Baixar Backup JSON
                    </button>
                </div>

                <div class="backup-card">
                    <h3 class="backup-card-title">üì• Importar Dados</h3>
                    <p class="backup-card-description">Restaure seus dados de um arquivo JSON</p>
                    <div class="file-input-container">
                        <input type="file" id="arquivo-import" accept=".json" class="file-input">
                        <label for="arquivo-import" class="file-input-label">
                            üìÅ Escolher arquivo JSON
                        </label>
                    </div>
                    <button class="btn btn-success" onclick="importarDados()">
                        üì§ Importar Dados
                    </button>
                </div>

                <div class="backup-card">
                    <h3 class="backup-card-title">üóëÔ∏è Limpar Dados</h3>
                    <p class="backup-card-description">Reset completo do sistema (cuidado!)</p>
                    <div class="backup-warning">
                        ‚ö†Ô∏è Esta a√ß√£o n√£o pode ser desfeita
                    </div>
                    <button class="btn btn-danger" onclick="limparTodosDados()">
                        üóëÔ∏è Limpar Tudo
                    </button>
                </div>

                <div class="backup-card">
                    <h3 class="backup-card-title">‚öôÔ∏è Configura√ß√µes</h3>
                    <p class="backup-card-description">Configura√ß√µes do sistema</p>
                    <div class="config-item">
                        <label>
                            <input type="checkbox" id="backup-automatico" onchange="configurarBackupAutomatico()">
                            Backup autom√°tico di√°rio
                        </label>
                    </div>
                    <button class="btn btn-primary" onclick="criarDadosExemplo()">
                        üéØ Gerar Dados de Exemplo
                    </button>
                </div>
            </div>

            <div class="dados-preview">
                <h3 class="section-title">üìä Preview dos Dados Atuais</h3>
                
                <div class="stats-resumo">
                    <div class="stat-resumo-item">
                        <span class="stat-resumo-numero" id="preview-empresas">0</span>
                        <span class="stat-resumo-label">Empresas</span>
                    </div>
                    <div class="stat-resumo-item">
                        <span class="stat-resumo-numero" id="preview-funcionarios">0</span>
                        <span class="stat-resumo-label">Funcion√°rios</span>
                    </div>
                    <div class="stat-resumo-item">
                        <span class="stat-resumo-numero" id="preview-obras">0</span>
                        <span class="stat-resumo-label">Obras</span>
                    </div>
                    <div class="stat-resumo-item">
                        <span class="stat-resumo-numero" id="preview-lancamentos">0</span>
                        <span class="stat-resumo-label">Lan√ßamentos</span>
                    </div>
                    <div class="stat-resumo-item">
                        <span class="stat-resumo-numero" id="preview-espelho">0</span>
                        <span class="stat-resumo-label">Registros Espelho</span>
                    </div>
                </div>

                <div class="dados-json-container">
                    <button class="btn btn-primary" onclick="mostrarPreviewJSON()" id="btn-preview">
                        üëÅÔ∏è Ver Estrutura JSON
                    </button>
                    <div id="json-preview" class="json-preview" style="display: none;">
                        <pre id="json-content"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </main>

    <!-- Toast de Notifica√ß√µes -->
    <div id="toast" class="toast">
        <span id="toast-message"></span>
        <button onclick="fecharToast()" class="toast-close">√ó</button>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="modal-overlay" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-titulo">Confirma√ß√£o</h2>
                <button class="modal-close" onclick="fecharModal()">&times;</button>
            </div>
            <div id="modal-conteudo" style="padding: 20px; font-size: 1rem;"></div>
            <div class="modal-actions">
                <button id="modal-confirmar" class="btn btn-primary">‚úÖ Confirmar</button>
                <button type="button" class="btn btn-danger" onclick="fecharModal()">‚ùå Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Loading Global -->
    <div id="loading-global" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Carregando...</p>
    </div>

    <!-- SheetJS para exporta√ß√£o Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="script.js?v=4.4"></script>
</body>
</html>