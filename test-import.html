<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Teste de Imports ES6</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .result { background: white; padding: 20px; margin: 10px 0; border-radius: 5px; }
        .success { border-left: 4px solid #10b981; }
        .error { border-left: 4px solid #ef4444; }
        pre { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px; }
        h1 { color: #1e293b; }
    </style>
</head>
<body>
    <h1>üß™ Teste de Imports ES6 Modules</h1>

    <div id="results">
        <div class="result">
            <p>‚è≥ Testando imports dos m√≥dulos...</p>
        </div>
    </div>

    <script type="module">
        const resultsDiv = document.getElementById('results');

        try {
            console.log('1Ô∏è‚É£ Iniciando teste de imports...');

            // Teste 1: Importar config
            console.log('2Ô∏è‚É£ Importando config.js...');
            const { APP_VERSION, API_CONFIG } = await import('./js/modules/config.js');
            console.log('‚úÖ config.js importado:', { APP_VERSION, API_CONFIG });

            // Teste 2: Importar store
            console.log('3Ô∏è‚É£ Importando store.js...');
            const storeModule = await import('./js/modules/store.js');
            console.log('‚úÖ store.js importado:', storeModule);

            // Teste 3: Importar ui
            console.log('4Ô∏è‚É£ Importando ui.js...');
            const { initUI, showNotification } = await import('./js/modules/ui.js');
            console.log('‚úÖ ui.js importado');

            // Teste 4: Importar api
            console.log('5Ô∏è‚É£ Importando api.js...');
            const { fetchAPI, EmpresasAPI } = await import('./js/modules/api.js');
            console.log('‚úÖ api.js importado');

            // Teste 5: Importar empresas
            console.log('6Ô∏è‚É£ Importando empresas.js...');
            const { initEmpresas, carregarEmpresas } = await import('./js/modules/empresas.js');
            console.log('‚úÖ empresas.js importado');

            // Teste 6: Testar API real
            console.log('7Ô∏è‚É£ Testando API real...');
            const response = await EmpresasAPI.listar();
            console.log('‚úÖ API funcionou:', response);

            resultsDiv.innerHTML = `
                <div class="result success">
                    <h3>‚úÖ Todos os m√≥dulos foram importados com sucesso!</h3>
                    <p><strong>APP_VERSION:</strong> ${APP_VERSION}</p>
                    <p><strong>API Base URL:</strong> ${API_CONFIG.baseURL || '(vazio - URL relativa)'}</p>
                    <p><strong>Empresas carregadas:</strong> ${response.dados?.length || 0}</p>
                    <details>
                        <summary>Ver dados das empresas</summary>
                        <pre>${JSON.stringify(response, null, 2)}</pre>
                    </details>
                    <div style="margin-top: 20px; padding: 15px; background: #f0fdf4; border-radius: 5px;">
                        <h4>üéâ A arquitetura modular est√° funcionando!</h4>
                        <p>Todos os imports est√£o corretos e a API est√° respondendo.</p>
                        <p>Se o app principal n√£o carrega, o problema pode ser:</p>
                        <ul>
                            <li>Elemento HTML faltando (sidebar, tabs, etc)</li>
                            <li>Erro no initUI() tentando acessar elemento inexistente</li>
                            <li>Problema no index.html</li>
                        </ul>
                    </div>
                </div>
            `;

        } catch (error) {
            console.error('‚ùå ERRO:', error);

            resultsDiv.innerHTML = `
                <div class="result error">
                    <h3>‚ùå Erro ao importar m√≥dulos</h3>
                    <p><strong>Mensagem:</strong> ${error.message}</p>
                    <pre>${error.stack}</pre>
                    <div style="margin-top: 20px; padding: 15px; background: #fef2f2; border-radius: 5px;">
                        <h4>üîß Como resolver:</h4>
                        <ol>
                            <li>Verifique o Console (F12) para ver o erro detalhado</li>
                            <li>Procure por erros de sintaxe nos arquivos .js</li>
                            <li>Verifique se todos os exports est√£o corretos</li>
                            <li>Confirme que n√£o h√° imports circulares</li>
                        </ol>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
